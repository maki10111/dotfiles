#!/bin/sh

subdir=$( find "$XDG_DOCUMENTS_DIR/subjects" -maxdepth 1 -type d | fzf)
[ -z "$subdir" ] && exit 1
echo "$( ls $subdir)"
read -r activity
mkdir -pv "$subdir/$activity" || exit 1
file=$( echo "$subdir" | sed "s|.*subjects\/||")
task=$( printf "%s-%s-task.md" "$file" "$activity")
answer=$( printf "%s-%s-answer.md" "$file" "$activity")

template=$(cat "$XDG_DOCUMENTS_DIR/subjects/.templates/activity.md")
echo "FULLDIR : $subdir/$activity"
touch "$subdir/$activity/$task"
echo "$template" >> "$subdir/$activity/$task"
touch "$subdir/$activity/$answer"
echo "$template" >> "$subdir/$activity/$answer"
echo $(ls "$subdir/$activity")
echo "DIR : $subdir"
echo "FILE : $file"
echo "ACTIVITY : $activity"
echo "TASK-FILE : $task"
echo "ANSWER-FILE : $answer"
